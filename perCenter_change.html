<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>个人中心-修改资料</title>
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/global.css" />
		<link rel="stylesheet" href="css/city-picker.css" />
		<script type="text/javascript" src="js/IIInsomniaCityPicker.js"></script>
		<script type="text/javascript" src="js/cityData.js"></script>
	</head>

	<body>
		<!--xieyuanbo header start-->
		<div class="header">
			<div class="wrap">
				<h1 class="fl"><a href="javascript:;">房屋快手</a></h1>
				<div class="city fl">
					<p class="fl" id="cityChoice"><span>北京</span><br>
						<a href="javascript:;" id="s_province" name="s_province">[切换城市]</a></p>

				</div>

				<form>
					<input type="text" placeholder="地铁、小三居、五环内" />
					<a href="javascript:;"></a>
					<span></span>
				</form>
				<div class="fr">
					<a href="javascript:;" id="sign">请登录</a>
					<span class="fenge"></span>
					<a href="register.html">免费注册</a>
				</div>
			</div>
		</div>
		<div class="nav">
			<div class="wrap clearfix">
				<ul>
					<li><a href="index.html">首页</a></li>
					<li><a href="hot_list.html">热门</a></li>
					<li><a href="shangxian.html">即将上线</a></li>
					<li><a href="javascript:;">我们</a></li>
					<li style="background: none;"><a href="javascript:;">新手？</a></li>
				</ul>
				<div class="fr">
					<div class="phone fl">
						Easy，手机号码直接登录
					</div>
					<div class="jian fl">
						<a href="javascript:;" id="jiantou"></a>
					</div>
				</div>
			</div>
		</div>
		<!--nav end-->
		<!--xieyuanbo header end-->
		<div class="wrap per_wrap">
			<h1>账号设置</h1>
			<div class="per_setList clearfix">
				<div class="clearfix">
					<h2 class="per_setItem fl">我的昵称</h2>
					<p class="per_setBefore fl">Allen.Le</p>
					<p class="per_expand fr">修改</p>
				</div>
				<div class="per_setAfter">
					<form>
						<label for="nickname">
							<span>昵称 : </span>
							<input type="text" name="" id="nickname" placeholder="Allen.Le" />
							<i>请输入新的昵称</i>
						</label>
						<a class="perbtn_save perbtn_save1">保存</a>
					</form>
				</div>
			</div>
			<!--end-->
			<div class="per_setList clearfix">
				<div class="clearfix">
					<h2 class="per_setItem fl">我的头像</h2>
					<p class="per_setBefore fl"><img src="img/per_small.png" class="per_head" /></p>
					<p class="per_expand fr">修改</p>
				</div>
				<div class="per_setAfter">
					<form>
						<label for="touxiang" id="tou">
							<span>上传头像 : </span>
							<a class="afile">请点击选择文件<input type="file" name="" id="touxiang"/></a>
							<em>√</em>
							<i>请选择上传文件</i>
						</label>
						<a class="perbtn_save perbtn_save2">保存</a>
					</form>
				</div>
			</div>
			<!--end-->
			<div class="per_setList clearfix">
				<div class="clearfix">
					<h2 class="per_setItem fl">我的电话</h2>
					<p class="per_setBefore fl">18605109964</p>
					<p class="per_expand fr">修改</p>
				</div>
				<div class="per_setAfter">
					<form>
						<label for="telnumber">
							<span>电话: </span>
							<input type="tel" name="" id="telnumber" placeholder="18605109964" />
							<i>请输入您真实的手机号码</i>
						</label>
						<a class="perbtn_save perbtn_save3">保存</a>
					</form>
				</div>
			</div>
			<!--end-->
			<div class="per_setList clearfix">
				<div class="clearfix">
					<h2 class="per_setItem fl">我的地址</h2>
					<p class="per_setBefore fl">北京、朝阳区</p>
					<p class="per_expand fr">修改</p>
				</div>
				<div class="per_setAfter">
					<form>
						<label for="place">
							<span>地址 : </span>
							<input type="text" name="" id="place" placeholder="北京、朝阳区" />
							<i>请输入您的地址</i>
						</label>
						<a class="perbtn_save perbtn_save4">保存</a>
					</form>
				</div>
			</div>
			<!--end-->
			<div class="per_setList clearfix" style="border-bottom: 0;">
				<div class="clearfix">
					<h2 class="per_setItem fl">我的密码</h2>
					<p class="per_setBefore fl">******</p>
					<p class="per_expand fr">修改</p>
				</div>
				<div class="per_setAfter">
					<form>
						<label for="oldpwd" class="oldpwd">
							<span>当前密码 : </span>
							<input type="password" name="pwd" id="oldpwd" />
							<i class="i1">请输入您的当前密码</i>
						</label>
						<label for="newpwd" class="newpwd">
							<span>新密码 : </span>
							<input type="password" name="pwd" id="newpwd" />
							<i class="i2">请输入您的新密码</i>
						</label>
						<label for="snewpwd" class="snewpwd">
							<span>确认新密码 : </span>
							<input type="password" name="pwd" id="snewpwd" />
							<i class="i3">请确认您的新密码</i>
						</label>
						<a class="perbtn_save perbtn_save5">保存</a>
					</form>
				</div>
			</div>
		</div>
		<!--liuqian per_list end-->
		<div class="footer">
			<div class="wrap">
				<div class="footer_center clearfix">
					<div class="footer_left fl">
						<ul class="clearfix">
							<li><a href="javascript:;">帮助</a></li>
							<li><a href="javascript:;">关于我们</a></li>
							<li><a href="javascript:;">一起工作</a></li>
							<li><a href="javascript:;">寻求合作</a></li>
							<li style="background: none;"><a href="javascript:;">联系我们</a></li>
						</ul>
						<p>
							©2014. FastFang, Inc. China. All Rights Reserved. 京ICP备14004852号
							<span>[北京发斯特房科技有限公司]</span>
						</p>
					</div>
					<div class="footer_right fr">
						<img src="img/footer_06.png">
						<img src="img/footer_03.png">
					</div>
				</div>
			</div>
		</div>
		<!--xieyuanbo footer end-->
		<div class="sign">
			<div class="clearfix hidd">
				<img src="img/deng_03.png">
			</div>
			<div class="fast">
				<h3>快速登录</h3>
				<form class="clearfix" style="position: relative;">
					<input type="text" placeholder="手机号" class="yong"  id="user" onBlur="checkForm()" />
					<span id="pro_user"></span>
					<input type="password" placeholder="密码" class="mi" id="pwdd"  onBlur="checkForm()" />
					<span id="pro_pwdd"></span><br>
					<input type="text" placeholder="验证码" class="yan" />
					<img src="img/deng_14.png">
				</form>
			<!--表单验证-->
			<script>
				function checkForm(){
					var tel=document.getElementById("user");
					var pro_user=document.getElementById("pro_user");
					if(tel.value==""){
						pro_user.innerHTML="请输入手机号码!";
						$("#pro_user").css({"position":"absolute","top":"8px","right":"5px","color":"#D5353B"});
						user.focus();
						return false;
					}
					var myreg = /^(1(3|4|5|8){1}[0-9]{1})+\d{8}$/;
					if(!myreg.test(tel.value)){
						pro_user.innerHTML="请输入有效的手机号码!";
						$("#pro_user").css({"position":"absolute","top":"8px","right":"5px","color":"#D5353B"});
						user.focus();
						return false;
					}else{
						pro_user.innerHTML=" ";   
					}
					//手机验证
					
					var age=document.getElementById("pwdd");
					var pro_pwdd=document.getElementById("pro_pwdd");
					if(age.value.length==""){
						pro_pwdd.innerHTML="密码不能为空！";
						$("#pro_pwdd").css({"position":"absolute","top":"61px","right":"5px","color":"#D5353B"});
						pwdd.focus();
						return false; 
					}else{
						pro_pwdd.innerHTML=" ";
					}
					//验证密码
				}
			</script>
				
			<!--表单验证-->			
				<div class="clearfix mb">
					<a href="javascript:;" class="fl">忘记密码？</a>
					<a href="register.html" class="fr">免费注册</a>
				</div>
				<button>立即登录</button>
			</div>
		</div>
		<div class="loading"></div>
		<!--denhlu end-->
	</body>
	<script src="js/jquery-1.12.1.js"></script>
	<script>
		$(document).ready(function() {
			//城市切换
					var cityPicker = new IIInsomniaCityPicker({
						data: data,
						target: 'cityChoice',
						valType: 'k-v',
						hideCityInput: {
							name: 'city',
							id: 'city'
						},
						hideProvinceInput: {
							name: 'province',
							id: 'province'
						},
					});
					cityPicker.init();
			//修改
			$(".per_setList .clearfix").click(function() {
				var af = $(this).next(".per_setAfter");
				if (af.is(":hidden")) {
					$(".per_setAfter").hide();
					$(".per_expand").css("background", "url(img/expand.png) no-repeat 51px").text("修改");					
					af.show();
					$(this).find(".per_expand").css("background", "url(img/up.png) no-repeat 51px").text("收起");
				} else{
					af.hide();
					$(".per_expand").css("background", "url(img/expand.png) no-repeat 51px").text("修改");
				}
				
			});
			
			$(".perbtn_save1").click(function(){	
				//验证昵称
				var $ts = $(this).siblings("label");
				var $nick = $ts.find("#nickname").val();
				var $pro_nickname = $ts.find("i");
				var num = /^[0-9]*$/;
				if($nick==""){
					$pro_nickname.show();
					$ts.focus();
					return false;
				}else if(num.test($nick)){
					$pro_nickname.text("不能输入数字！");
					$ts.focus();
					return false;
				}else if($nick.length<6||$nick.length>12){
					$pro_nickname.text("昵称为6—12位!");
					$ts.focus();
					return false;
				}else{
					$pro_nickname.text("√");
				}
			});
			//验证头像
			$(".perbtn_save2").click(function(){
				var $ts = $(this).siblings("label");
				var $tx=$ts.find("#touxiang").val();
				var $pro_tx=$ts.find("i");
				if ($tx==""){
					$pro_tx.show();	
					$(".afile").css("border","2px solid #A0C2F9");
					return false;				
				}else{
					$(".afile").text("已修改完成");
					$(".afile").css("border","2px solid #F3F3F3");
					$pro_tx.text("√");
				}
			});
			//验证电话
			$(".perbtn_save3").click(function(){
				var $ts = $(this).siblings("label");
				var tel=$ts.find("#telnumber").val();
				var pro_tel=$ts.find("i");
				if(tel==""){
					pro_tel.show();	
					$ts.focus();
					return false;
				}
				var myreg = /^(1(3|4|5|8){1}[0-9]{1})+\d{8}$/;
				if(!myreg.test(tel)){
					pro_tel.text("请输入有效的手机号码!");	
					$ts.focus();
					return false;
				}else{
					pro_tel.text("√");   
				}
			});
			//验证地址
			$(".perbtn_save4").click(function(){
				var $ts = $(this).siblings("label");
				var place=$ts.find("#place").val();
				var pro_place=$ts.find("i");
				if(place==""){
					pro_place.show();
					$ts.focus();
					return false;
				}else{
					pro_place.text("√");   
				}
			});
			//验证密码
			$(".perbtn_save5").click(function(){
				var save5 = $(".perbtn_save5");
				var $ts1 = save5.siblings(".oldpwd");
				var $ts2 = save5.siblings(".newpwd");
				var $ts3 = save5.siblings(".snewpwd");
				var $ts = save5.siblings("label");
				var oldpwd = $ts.find("#oldpwd").val();
				var pro_oldpwd = $ts.find(".i1"); 
				var newpwd = $ts.find("#newpwd").val();
				var pro_newpwd = $ts.find(".i2");  
				var pwd2 = $ts.find("#snewpwd").val();
				var pro_pwd2 = $ts.find(".i3");  
				//原密码
				if(oldpwd==""){
					pro_oldpwd.show();
					$ts1.focus()
					return false;
				}else{
					pro_oldpwd.text("√");
				}
				
				//新密码
				if (newpwd==""){
					pro_newpwd.show();	
					$ts2.focus();
					return false;
				}else if(newpwd==oldpwd){
					pro_newpwd.text("不能与原密码相同");
					$ts2.focus();
					return false;
				}else{
					$("#tou em").show();
					pro_newpwd.text("√");
				}
					
				//确认新密码				
				if (pwd2==""){
					pro_pwd2.show();
					$ts3.focus();
					return false;
				}else if(pwd2!=newpwd){
					pro_pwd2.text("两次密码输入不同");
					$ts3.focus();
					return false;			
				}else{
					pro_pwd2.text("√");
				}
			});
			//denglu弹窗
			$(function(){
				$('#sign,#jiantou').on("click",function(){
					$('.sign,.loading').show();
				});
				$('.hidd img').on("click",function(){
					$('.sign,.loading').hide();
				});

			});
			
		});
	</script>
</html>